<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./WEB-INF/templates/Template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="empleado">
        
        <h:form>
            
            <p:commandLink value="Modificar Aviso"  action="#{opcionesAviso.modificarAviso()}" />    
            <p:commandLink value="Gestion orden de trabajo" id="got"  action="#{boton.ot}" />
            <p:commandLink value="Asignar visita" id="asignar_visita"  action="#{boton.asignarVisita()}"  />
            <p:commandLink value="Reasignar aviso" id="reasignar_aviso"  action="#{boton.reasignarAviso()}"  />
            <p:commandLink value="Relacionar con otro aviso" id="aviso_relacionado"  action="#{boton.avisosRelacionados()}" />      
            <p:commandLink value="Bandeja de entrada" id="bandejaEntrada"  action="#{boton.volverBandeja()}"  />
            <p:commandLink value="Ver historico"  onclick="PF('dlg3').show();"  />  
        </h:form>
            

    </ui:define>

    <ui:define name="aviso">
        
         <h:form id="formulario"> 
             
            <p:dialog header="Seleccione el rango de fecha" widgetVar="dlg3" height="100">
                
                    <p:outputLabel for="button" value="Desde" />
                    <p:calendar id="button2" value="#{calendarioVista.date2}" showOn="button" />

                    <p:outputLabel for="button" value="Hasta" />
                    <p:calendar id="button3" value="#{calendarioVista.date3}" showOn="button" />
                    
                    <p:outputLabel id="comentarioFechas" value="Puedes dejar las fechas en blanco para ver todos los historicos"/>
                    <p:commandButton value="Confirmar" onclick="irHistoricos()" />
            </p:dialog>
            
       
            <p:commandButton value="Print" type="button" icon="ui-icon-print" style="display:block;margin-bottom: 20px">
                <p:printer target="avisoImpreso" />
            </p:commandButton>   
            <p:panelGrid id="avisoImpreso" columns="4">
                    <p:outputLabel value="ID aviso: " /> <p:outputLabel id="id_aviso" value=" #{opcionesAviso.aviso.idAviso}" /> 
                    <p:outputLabel value="Supervisor asignado: " /> <p:outputLabel id="ID_supervisor" value=" #{opcionesAviso.supervisor}" />      
                    <p:outputLabel value="Fecha de entrada: " />
                    <p:outputLabel id="fecha_entrada" value=" #{opcionesAviso.fechaEntrada}" >
                    </p:outputLabel>
                    <p:outputLabel value="Origen: " /> <p:outputLabel id="origen" value=" #{opcionesAviso.aviso.origen}" /> 
                    <p:outputLabel value="Dni cliente: " /> <p:outputLabel id="DNI_cliente" value=" #{opcionesAviso.aviso.dni.dni}" /> 
                    <p:outputLabel value="Ultimo historico: " /> <p:outputLabel id="Ultima_version" value=" #{opcionesAviso.ultimoHist}" > </p:outputLabel>    
                    <p:outputLabel value="Relacionado con: " /> 
                    <p:inplace editor="true">
                        <p:inputText  id="relacionado" value="#{opcionesAviso.relacionado}"  /> 
                    </p:inplace>     
                    <p:outputLabel  value="Descripción " />
                    <p:inplace editor="true"> 
                        <h:inputTextarea value="#{opcionesAviso.his.descripcion}"  /> 
                    </p:inplace>                     
                    <p:outputLabel  value="Direccion " />
                    <p:inplace editor="true">
                        <p:inputText value="#{opcionesAviso.his.direccion}"  /> 
                    </p:inplace> 
                    <p:outputLabel  value="Estado " />
                    <p:inplace editor="true">
                        <p:inputText  value="#{opcionesAviso.his.estado}"  /> 
                    </p:inplace> 
                    <p:outputLabel  value="Duplicado " />
                    <p:inplace editor="true">
                        <p:inputText  value="#{opcionesAviso.his.duplicado}"  /> 
                    </p:inplace> 
                    <p:outputLabel for="button" value="Fecha cierre:" />
                    <p:calendar id="button" value="#{calendarioVista.date1}" showOn="button" />
                    <p:outputLabel  value="Tipo de aviso" />
                    <p:inplace editor="true">
                        <p:inputText value="#{opcionesAviso.his.tipoAviso}"  /> 
                    </p:inplace>     
                    <p:outputLabel  value="Causa" />
                    <p:inplace editor="true">
                        <h:inputTextarea value="#{opcionesAviso.his.causa}"  /> 
                    </p:inplace>    
                    <p:outputLabel  value="Urgencia" />
                    <p:inplace editor="true">
                        <h:inputTextarea value="#{opcionesAviso.his.urgencia}"  /> 
                    </p:inplace>    
                    <p:outputLabel  value="Ubicacion_gps" />
                    <p:inplace editor="true">
                        <h:inputTextarea value="#{opcionesAviso.his.ubicacionGps}"  /> 
                    </p:inplace>   
                    <p:outputLabel  value="Red de agua" />
                    <p:inplace editor="true">
                        <h:inputTextarea value="#{opcionesAviso.his.redAgua}"  /> 
                    </p:inplace> 
                    
                    <p:outputLabel  value="Documentación adjunta" />
                    <p:inplace editor="true">
                        <h:inputTextarea value="#{opcionesAviso.his.docAdjunto}"  /> 
                    </p:inplace>       
                </p:panelGrid>   
        </h:form>
    </ui:define>
</ui:composition>
