CREATE TABLE ACTUACIONES (OBSERVACIONES VARCHAR2(255) NULL, OPER_REALIZADAS VARCHAR2(255) NULL, FECHA_ACTUACION TIMESTAMP NOT NULL, ID_ORDEN NUMBER(10) NOT NULL, PRIMARY KEY (FECHA_ACTUACION, ID_ORDEN))
CREATE TABLE AVISO (ID_AVISO NUMBER(10) NOT NULL, FECHA_ENTRADA TIMESTAMP NULL, ORIGEN VARCHAR2(255) NULL, DNI VARCHAR2(255) NULL, ID_EMPLEADO NUMBER(10) NULL, RELACIONADO NUMBER(10) NULL, PRIMARY KEY (ID_AVISO))
CREATE TABLE BRIGADA (NUM_BRIGADA NUMBER(10) NOT NULL, CONTRATA CHAR(1) NULL, TURNO NUMBER(10) NULL, PRIMARY KEY (NUM_BRIGADA))
CREATE TABLE CLIENTE (DNI VARCHAR2(255) NOT NULL, EMAIL VARCHAR2(255) NULL, NOMBRE VARCHAR2(255) NULL, POLIZA NUMBER(38) NULL, TELEFONO NUMBER(38) NULL, PRIMARY KEY (DNI))
CREATE TABLE EMPLEADO (ID_EMPLEADO NUMBER(10) NOT NULL, APELLIDOS VARCHAR2(255) NULL, CARGO VARCHAR2(255) NULL, DEPARTAMENTO VARCHAR2(255) NULL, DNI VARCHAR2(255) NULL, E_MAIL VARCHAR2(255) NULL, ESPECIALIDAD VARCHAR2(255) NULL, NOMBRE VARCHAR2(255) NULL, PASSWORD VARCHAR2(255) NULL, TURNO NUMBER(10) NULL, ZONA VARCHAR2(255) NULL, NUM_BRIGADA NUMBER(10) NULL, PRIMARY KEY (ID_EMPLEADO))
CREATE TABLE HISTORICO (CAUSA VARCHAR2(255) NULL, DESCRIPCION VARCHAR2(255) NULL, DIRECCION VARCHAR2(255) NULL, DOC_ADJUNTO VARCHAR2(255) NULL, DUPLICADO NUMBER(10) NULL, ESTADO VARCHAR2(255) NULL, FECHA_CIERRE TIMESTAMP NULL, RED_AGUA VARCHAR2(255) NULL, TIPO_AVISO VARCHAR2(255) NULL, UBICACION_GPS VARCHAR2(255) NULL, URGENCIA VARCHAR2(255) NULL, FECHA_ACTUALIZACION TIMESTAMP NOT NULL, ID_AVISO NUMBER(10) NOT NULL, SUPERVISOR NUMBER(10) NOT NULL, ID_EMPLEADO NUMBER(10) NULL, PRIMARY KEY (FECHA_ACTUALIZACION, ID_AVISO, SUPERVISOR))
CREATE TABLE ORD_TRABAJO (ID_ORDEN NUMBER(10) NOT NULL, ESTADO VARCHAR2(255) NULL, FECHA_CREACION TIMESTAMP NULL, FECHA_FINALIZACION TIMESTAMP NULL, NUM_BRIGADA NUMBER(10) NULL, TRABAJO_A_REALIZAR VARCHAR2(255) NULL, FECHA_ACTUALIZACION TIMESTAMP NULL, SUPERVISOR NUMBER(10) NULL, ID_AVISO NUMBER(10) NULL, PRIMARY KEY (ID_ORDEN))
CREATE TABLE VISITAS (FECHA_VISITA TIMESTAMP NOT NULL, ID_EMPLEADO NUMBER(10) NULL, FECHA_ACTUALIZACION TIMESTAMP NULL, SUPERVISOR NUMBER(10) NULL, ID_AVISO NUMBER(10) NULL, PRIMARY KEY (FECHA_VISITA))
ALTER TABLE ACTUACIONES ADD CONSTRAINT FK_ACTUACIONES_ID_ORDEN FOREIGN KEY (ID_ORDEN) REFERENCES ORD_TRABAJO (ID_ORDEN)
ALTER TABLE AVISO ADD CONSTRAINT FK_AVISO_ID_EMPLEADO FOREIGN KEY (ID_EMPLEADO) REFERENCES EMPLEADO (ID_EMPLEADO)
ALTER TABLE AVISO ADD CONSTRAINT FK_AVISO_RELACIONADO FOREIGN KEY (RELACIONADO) REFERENCES AVISO (ID_AVISO)
ALTER TABLE AVISO ADD CONSTRAINT FK_AVISO_DNI FOREIGN KEY (DNI) REFERENCES CLIENTE (DNI)
ALTER TABLE EMPLEADO ADD CONSTRAINT FK_EMPLEADO_NUM_BRIGADA FOREIGN KEY (NUM_BRIGADA) REFERENCES BRIGADA (NUM_BRIGADA)
ALTER TABLE HISTORICO ADD CONSTRAINT FK_HISTORICO_ID_EMPLEADO FOREIGN KEY (ID_EMPLEADO) REFERENCES EMPLEADO (ID_EMPLEADO)
ALTER TABLE HISTORICO ADD CONSTRAINT FK_HISTORICO_ID_AVISO FOREIGN KEY (ID_AVISO) REFERENCES AVISO (ID_AVISO)
ALTER TABLE ORD_TRABAJO ADD CONSTRAINT ORD_TRABAJOFECHA_ACTUALIZACION FOREIGN KEY (FECHA_ACTUALIZACION, ID_AVISO, SUPERVISOR) REFERENCES HISTORICO (FECHA_ACTUALIZACION, ID_AVISO, SUPERVISOR)
ALTER TABLE VISITAS ADD CONSTRAINT FK_VISITAS_FECHA_ACTUALIZACION FOREIGN KEY (FECHA_ACTUALIZACION, ID_AVISO, SUPERVISOR) REFERENCES HISTORICO (FECHA_ACTUALIZACION, ID_AVISO, SUPERVISOR)
ALTER TABLE VISITAS ADD CONSTRAINT FK_VISITAS_ID_EMPLEADO FOREIGN KEY (ID_EMPLEADO) REFERENCES EMPLEADO (ID_EMPLEADO)
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR2(50) NOT NULL, SEQ_COUNT NUMBER(38) NULL, PRIMARY KEY (SEQ_NAME))
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SEQ_GEN', 0)
